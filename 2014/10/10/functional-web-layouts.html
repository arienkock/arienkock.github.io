<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Arien Kock is Positor, a freelance Java web developer and consultant. I build connected applications and continuous delivery pipelines. This is home to my blog and professional profile.">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Functional Web Layouts - Positor</title>
	<link rel="icon" href="/images/favicon.png" type="image/png">
	<link rel="apple-touch-icon" href="/images/favicon.png">
	<link rel="shortcut icon" href="/images/favicon.png" type="image/png">

    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Place favicon.ico in the root directory -->

    <link rel="stylesheet" href="/styles/main.css">

	<link rel="stylesheet" href="/styles/highlight/solarized-dark-custom.css">
  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="container">
		<div class="header">
			<div class="logo">
				<a href="/">
				<h1>Positor</h1>
				<p>Building solutions with code</p>
				</a>
			</div>
			<!--div class="menu">
				<div class="item"></div>
				<div class="item"></div>
				<div class="item navItem"><a href="/">Blog</a></div>
				<div class="item navItem"><a href="/profile.html">Profile</a></div>
			</div-->
		</div>
		<div class="content">
			
<div class="article">
<h1 class="articleTitle">Functional Web Layouts</h1>
<div class="posted-on-date">Posted on 2014-10-10</div>
<p>Watching Strange Loop 2014 conference videos I was reminded about Elm, a functional reactive programming language for the web. One of my favorite features is the functional graphics. You can say things like <code>flow up [item1, item2, item3]</code> and they will appear vertically stacked in reverse order! The creator said in a talk that, being a traditionally server-side guy, while working on a layout issue he asked himself</p>
<blockquote>
<p>&quot;Why is this so... BAD?&quot;</p>
</blockquote>
<p>Functional programming has re-use and componentization at heart and that&#39;s something that web page layouts can really use right about now. Elm&#39;s way of doing layout is nice, but the DOM is generated by JS and AFAIK doesn&#39;t have a built-in way of doing responsiveness. However, I don&#39;t want to write about Elm.</p>
<h3 id="a-better-web-design-language">A better web-design language</h3>
<p><em>I want a way to declaratively scaffold my layout.</em> I want to be able to say something along the lines of (insufficiently specific pseudo-code)</p>
<pre><code>page = sticky_header(myHeader, 
           sticky_footer(three_columns(col1,col2,col3), myFooter))
</code></pre><p>Obviously... complex layouts can&#39;t be one-liners. Or can they? If you have a layout that you like and you want to reproduce it, then we really <em>shouldn&#39;t have to strip the markup and styles out of a previous project</em> in order to re-use it. When you write library functions, you can include them in a next project as a modular component (in most languages). If you have a web page component and you want to re-use, Bower doesn&#39;t really cover all of it. At least, it&#39;s not as straight-forward as writing a single <code>import</code> line. WebComponents bring you all the way there, but there are things about custom elements that I don&#39;t like and go against some of what I&#39;m suggesting.</p>
<ol>
<li>sandboxed CSS stops you from fully customizing appearance</li>
<li>sandboxed JS discourages re-use of functions and may balloon your code size from all the dependent libraries</li>
<li>polyfills for older browsers aren&#39;t a perfect solution</li>
</ol>
<p>However, if these do not bother you, then &quot;yes&quot;, these will do the trick and I believe, down the line, WebComponents will be the dominant life-form on the web. Polymer provides <a href="https://www.polymer-project.org/docs/elements/layout-elements.html">some nice layout components</a> to get you started. The unfortunately named <a href="https://mozbrick.github.io/docs/brick-layout.html">Mozilla Brick</a> has some too. On a sidenote: I hope there will be a way to (intentionally) affect styles of elements <em>inside</em> of shadow-DOM. Using a special CSS selector is the simplest solution I can think of.</p>
<p>Another solution I considered and dismissed is GSS. <a href="http://gridstylesheets.org/">Grid Style Sheets</a> have JavaScript doing the layout, which isn&#39;t ideal when it comes to supporting low-end devices. That and, despite how expressive it is, when it comes to layout, it&#39;s not addressing the reusability problem.</p>
<h3 id="functional-responsive-layouts">Functional responsive layouts</h3>
<p>I want to express layout <em>ideas</em> in a composable way. Responsiveness is a challenge, because I find it difficult to think of a way to declare a responsive layout in a simple way that doesn&#39;t boil down to specifying a rule for each screen/media-query. In any system where we can define the structure of the DOM, we can&#39;t freely re-structure it with a second declaration without adding JS functions to manipulate it. This is because true source order independence and and hieraarchical independence are a thing. This is a big challenge in RWD. With current techhnology, restructuring the DOM  gets you  <a href="http://en.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC&#39;d</a> and you need resize event-handlers that could adversely affect performance. So, in order to work with the current state of browsers and HTML/CSS in a way that doesn&#39;t rely on DOM manipulation, the <em>structure</em> of the document would have to remain <em>constant</em> and only the flow vary by screen type. E.g.</p>
<pre><code>page = respond [item1, item2, item3]
    @min-width: 200em 
        flow right full-height [20em, fluid, 20em]
    @max-width: 199.999em
        flow down full-width [default, default, 20em]
</code></pre><p>In this example, which is hopefully self-explanatory, the items are listed once because they are the same for each rule. While the media queries each have their own flow definition. I&#39;m not sure if I would have come up with this syntax/example if I wasn&#39;t inspired by Flexbox.</p>
<h3 id="flexbox">Flexbox</h3>
<p>Even though many sites still aim to target &lt; IE10, it is not completely unthinkable to use Flexbox. Because of its expressiveness you can achieve many of the familiar layouts with only a single list of DOM elements. It reduces the need for nesting your content blocks into utility-DIV&#39;s. Unnecessary DIV&#39;s can make it harder to be responsive without manipulating the DOM. However, in many cases it&#39;s not required to use Flexbox to achieve certain layout variations. For example <a href="http://www.cssstickyfooter.com/using-sticky-footer-code.html">this sticky footer solution</a> have only a single extra DIV, which can be ignored when reflowing. However, when would you want is a sticky footer to not be a sticky footer anymore?</p>
<h3 id="now-what-">Now what?</h3>
<p>Maybe there already is something like this and I just don&#39;t know it yet. In <a href="http://en.wikipedia.org/wiki/User_interface_markup_language">the sea of UI markup languages</a>, I don&#39;t see one that converts to HTML other than <a href="http://www.gwtproject.org/doc/latest/DevGuideUiBinder.html">GWT&#39;s UiBinder</a>, which doesn&#39;t abstract away layout. If there <strong>IS</strong> something, then nothing happens next. If I can&#39;t find anything that generates HTML+CSS for layout from a layout-description, then I want to find out...</p>
<ol>
<li>which layout components are so common that they should be one-liners?</li>
<li>what CSS techniques exist to achieve these layouts and what HTML structure is required?</li>
<li>is it possible to freely switch between layout types with only CSS changes?</li>
<li>what syntax can we use to declare these responsive layouts?</li>
<li>can this all be done without making each website look the same?</li>
</ol>

</div>
<div id="disqus_thread"></div>
<script>
var disqus_config = function () {
this.page.url = 'http://positor.nl/2014/10/10/functional-web-layouts.html';
this.page.identifier = 'functional-web-layouts.html';
};
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://positor-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

		</div>
	</div>

    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='https://www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-19252179-3');ga('send','pageview');
    </script>
	<script src="/scripts/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
